<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Page Title</title>
	<link id="resetStyles" rel="stylesheet" href="../../../dojo/resources/dojo.css"/>
	<link id="themeStyles" rel="stylesheet" href="../../../dijit/themes/claro/claro.css"/>
	<style>
		body {
			padding: 1em;
		}
	</style>
	<script>
		djConfig = {
			isDebug: true,
			parseOnLoad: false,
		}
	</script>
	<script src="../../../dojo/dojo.js"></script>
	<script type="text/javascript">
		dojo.require("samiam.store.Service");
		dojo.require("doh.runner");
		

		var fakesvc = {
		    get: function(id) {
		        console.log("Get Service Called");
		        var def = new dojo.Deferred();
		        def.callback({
		            id: id,
		            name: "Item " + id
		        });
		        return def;
		    },

		    query: function(query) {
		        console.log("query Service Called");
		        var def = new dojo.Deferred();
		        def.callback([{
		            id: 1,
		            name: "Item1"},
		        {
		            id: 3,
		            name: "Item1"},
		        {
		            id: 3,
		            name: "Item3"}]);
		        return def;
		    }
		};
		
		dojo.ready(function() {

			doh.registerTests("Service", [
				function smokeTest() {
					doh.t("samiam.store.Service", "class loaded");
					doh.is("function", typeof samiam.store.Service, "is a function");
					
				},
				function fakeServiceStore() {
					var store = samiam.store.Service(fakesvc);
					doh.is("function", typeof store.query, "instance looks store-like");
					
					// store.get("A").then(function(res) {
					//     console.log("GET resutls", res);
					// });
					// store.query({
					//     "type": "a"
					// }).then(function(res) {
					//     console.log("query resutls", res);
					// });
					// 
				}
			]);
			
			doh.run();
		});
	</script>
</head>
<body class="claro">
	<div id="ui">
		<h1>samiam.store.Service Page</h1>
		
		<h2>Service items</h2>
		<ul id="itemsList"></ul>
	</div>
</body>
</html>
	
